//---------------------------------------------------------------------------------

//phone or PC

//const isMobile = {
//	Android: function () {
//		return navigator.userAgent.match(/Android/i);
//	},
//	BlackBerry: function () {
//		return navigator.userAgent.match(/BlackBerry/i);
//	},
//	iOS: function () {
//		return navigator.userAgent.match(/iPhone|iPad|iPod/i);
//	},
//	Opera: function () {
//		return navigator.userAgent.match(/Opera Mini/i);
//	},
//	Windows: function () {
//		return navigator.userAgent.match(/IEMobile/i);
//	},
//	any: function () {
//		return (
//			isMobile.Android() ||
//			isMobile.BlackBerry() ||
//			isMobile.iOS() ||
//			isMobile.Opera() ||
//			isMobile.Windows());
//	}
//};

//if (isMobile.any()) {
//	document.body.classList.add('_touch');

//	let menuArrows = document.querySelectorAll('.menu__arrow');
//	if (menuArrows.length > 0) {
//		for (let index = 0; index < menuArrows.length; index++) {
//			const menuArrow = menuArrows[index];
//			menuArrow.addEventListener("click", function (e) {
//				menuArrow.parentElement.classList.toggle('_active');
//			});
//		}
//	}

//} else {
//	document.body.classList.add('_pc');
//}

//--------------------------------------------------------------------------------
//option placeholder

// only search

const mainForm = document.forms.main;
const mainFormInput = mainForm.forma;

const mainFormInputPlaceholder = mainFormInput.placeholder;

mainFormInput.addEventListener("focus", function (e) {
	mainFormInput.placeholder = "";
	mainFormInput.classList.add('_active');
});
mainFormInput.addEventListener("blur", function (e) {
	mainFormInput.placeholder = mainFormInputPlaceholder;
	mainFormInput.classList.remove('_active');
});






//---------------------------------------

// all "name='form'"

const mainFor = document.forms.mai;
const mainFormInpu = mainFor.form;


for (let index = 0; index < mainFormInpu.length; index++) {

	const mainFormInpus = mainFormInpu[index];

	const Placeholder = mainFormInpus.placeholder;

	mainFormInpus.addEventListener("focus", function (e) {
		mainFormInpus.placeholder = "";
		mainFormInpus.classList.add('_active');
	});
	mainFormInpus.addEventListener("blur", function (e) {
		mainFormInpus.placeholder = Placeholder;
		mainFormInpus.classList.remove('_active');
	});

}


//-----------------------------------------------------------------------------------------
//Actions 'search'

window.onload = function () {
	document.addEventListener("click", documentActions);

	function documentActions(e) {
		const targetElement = e.target;
		if (targetElement.classList.contains('search-form__icon')) {
			document.querySelector('.search-form').classList.toggle('_active');
		} else if (!targetElement.closest('.search-form') && document.querySelector('.search-form._active')) {
			document.querySelector('.search-form').classList.remove('_active');
		}
	}
}


//----------------------------------------------------------------

// menu burger


const iconMenu = document.querySelector('.menu__icon');
const menuBody = document.querySelector('.menu__body');
if (iconMenu) {
	iconMenu.addEventListener("click", function (e) {
		document.body.classList.toggle('_lock');
		iconMenu.classList.toggle('_active');
		menuBody.classList.toggle('_active');
	});
}

//---------------------------------------------------------------
//_ibg

function ibg() {
	let ibg = document.querySelectorAll("._ibg");
	for (var i = 0; i < ibg.length; i++) {
		if (ibg[i].querySelector('img') && ibg[i].querySelector('img').getAttribute('src') != null) {
			ibg[i].style.backgroundImage = 'url(' + ibg[i].querySelector('img').getAttribute('src') + ')';
		}
	}
}
ibg();

//---------------------------------------------------------------------

//slider

//BildSlider
let sliders = document.querySelectorAll('._swiper');
if (sliders) {
	for (let index = 0; index < sliders.length; index++) {
		let slider = sliders[index];
		if (!slider.classList.contains('swiper-bild')) {
			let slider_items = slider.children;
			if (slider_items) {
				for (let index = 0; index < slider_items.length; index++) {
					let el = slider_items[index];
					el.classList.add('swiper-slide');
				}
			}
			let slider_content = slider.innerHTML;
			let slider_wrapper = document.createElement('div');
			slider_wrapper.classList.add('swiper-wrapper');
			slider_wrapper.innerHTML = slider_content;
			slider.innerHTML = '';
			slider.appendChild(slider_wrapper);
			slider.classList.add('swiper-bild');
		}

	}
	sliders_bild_callback();
}



function sliders_bild_callback(params) { }

let slider_about = new Swiper('.slider-main__body', {
	/*
	effect: 'fade',
	autoplay: {
		delay: 3000,
		disableOnInteraction: false,
	},
	*/
	// Обновить свайпер
	// при изменении элементов слайдера
	observer: true,
	// Обновить свайпер
	// при изменении родительских
	// элементов слайдера
	observeParents: true,
	slidesPerView: 1,
	spaceBetween: 0,
	watchOverflow: true,
	autoHeight: true,
	speed: 1000,
	// Бесконечный слайдер
	loop: true,
	// перетаскивания на ПК
	simulateTouch: true,
	// Чувствительность свайпа
	touchRatio: 1,
	// Угол срабатывания свайпа/перетаскивания
	touchAngle: 45,
	// Курсор перетаскивания
	//grabCursor: true,
	//touchRatio: 0,
	//simulateTouch: false,
	//loop: true,
	//preloadImages: false,
	//lazy: true,
	// Dotts
	pagination: {
		el: '.controls-slider-main__dotts',
		clickable: true,
	},
	//Arrows 
	navigation: {
		nextEl: '.slider-main .slider-arrows_next',
		prevEl: '.slider-main .slider-arrows_prev',
	},
	/*
	breakpoints: {
		320: {
			slidesPerView: 1,
			spaceBetween: 0,
			autoHeight: true,
		},
		768: {
			slidesPerView: 2,
			spaceBetween: 20,
		},
		992: {
			slidesPerView: 3,
			spaceBetween: 20,
		},
		1268: {
			slidesPerView: 4,
			spaceBetween: 30,
		},
	},
	*/
	//on: {
	//	lazyImageReady: function () {
	//		ibg();
	//	},
	//}
	// And if we need scrollbar
	//scrollbar: {
	//	el: '.swiper-scrollbar',
	//},
});

//-----------------------------------------------------------------------------------
//button tell me more

const scroll = document.querySelector('.content-main-slider__btn')
scroll.addEventListener("click", Scroll);

const scrollToo = document.querySelector('.about-page');

function Scroll(e) {
	window.scroll({
		left: 0,
		top: scrollToo.offsetTop,
		behavior: "smooth"
	})
	e.preventDefault();
}


//var scroll = new SmoothScroll('a[href*="#"]');


//-----------------------------------------------------------------------------------------

// Scroll click 'menu'

const menuLinks = document.querySelectorAll('.menu__link[data-goto]');
if (menuLinks.length > 0) {
	menuLinks.forEach(menuLink => {
		menuLink.addEventListener("click", onMenuLinkClick);
	});


	function onMenuLinkClick(e) {
		const menuLink = e.target;

		if (menuLink.dataset.goto && document.querySelector(menuLink.dataset.goto)) {
			const gotoBlock = document.querySelector(menuLink.dataset.goto);
			const gotoBlockValue = gotoBlock.getBoundingClientRect().top + scrollY - document.querySelector('header').offsetHeight;

			if (iconMenu.classList.contains('_active')) {
				document.body.classList.remove('_lock');
				iconMenu.classList.remove('_active');
				menuBody.classList.remove('_active');

			}

			window.scrollTo({

				top: gotoBlockValue,
				behavior: "smooth"

			});


			e.preventDefault();
		}
	}
}



// без хедер = фиксед

//function onMenuLinkClick(e) {
//	const menuLink = e.target;
//	if (menuLink.dataset.goto && document.querySelector(menuLink.dataset.goto)) {
//		const gotoBlock = document.querySelector(menuLink.dataset.goto);
//		const gotoBlockValue = gotoBlock.getBoundingClientRect().top;

//		if (iconMenu.classList.contains('_active')) {
//			document.body.classList.remove('_lock');
//			iconMenu.classList.remove('_active');
//			menuBody.classList.remove('_active');
//		}

//		window.scrollTo({
//			top: gotoBlockValue,
//			behavior: "smooth"
//		});
//		e.preventDefault();
//	}
//}

//----------------------------------------------------------------------------------------------------------
//button 'showMore'

const showMore = document.querySelector('.services-page__showmore');
const moreBody = document.querySelector('.services-page__bottom');
if (showMore) {
	showMore.addEventListener("click", function (e) {
		showMore.classList.toggle('_active');
		moreBody.classList.toggle('_active');
		e.preventDefault();


		// change name button

		if (showMore.classList.contains('_active')) {
			showMore.innerHTML = `Hide...`;

		}
		else if (!showMore.classList.contains('_active')) {
			showMore.innerHTML = `Show more`;
		}

	});

}


//---------------------------------------------------------------------------------------------------
//Tabs

let tabs = document.querySelectorAll("._tabs");
for (let index = 0; index < tabs.length; index++) {
	let tab = tabs[index];
	let tabs_items = tab.querySelectorAll("._tabs-item");
	let tabs_blocks = tab.querySelectorAll("._tabs-block");
	for (let index = 0; index < tabs_items.length; index++) {
		let tabs_item = tabs_items[index];
		tabs_item.addEventListener("click", function (e) {
			for (let index = 0; index < tabs_items.length; index++) {
				let tabs_item = tabs_items[index];
				tabs_item.classList.remove('_active');
				tabs_blocks[index].classList.remove('_active');
			}
			tabs_item.classList.add('_active');
			tabs_blocks[index].classList.add('_active');
			e.preventDefault();
		});
	}
}


//--------------------------------------------------------------------------------------------------
//mouse scroll 'our works'

const mouses = document.querySelectorAll('.block-item');

for (let index = 0; index < mouses.length; index++) {
	const mouse = mouses[index];

	(function () {

		function scrollHorizontally(e) {
			e = window.event || e;
			var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));
			mouse.scrollLeft -= (delta * 70); // Multiplied by 
			if ((delta > 0 && mouse.scrollLeft > 0) || (delta < 0 && mouse.offsetWidth + mouse.scrollLeft < mouse.scrollWidth)) {
				e.preventDefault();
			};

		}
		if (mouse.addEventListener) {
			// IE9, Chrome, Safari, Opera
			mouse.addEventListener("mousewheel", scrollHorizontally, false);
			// Firefox
			mouse.addEventListener("DOMMouseScroll", scrollHorizontally, false);
		} else {
			// IE 6/7/8
			mouse.attachEvent("onmousewheel", scrollHorizontally);
		}



	})()
};

//----------------------------------------------------------------------------------------------------



